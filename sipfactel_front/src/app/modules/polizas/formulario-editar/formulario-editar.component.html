<div class="row">
  <h4 class="ml-4 mr-3" style="margin-top: 20px; margin-bottom: 15px">
    Pólizas editar
  </h4>

  <span style="color: #62b7e9">
    <i
      class="fa fa-info-circle fa-lg mt-4 mb-"
      ngbTooltip=" pantalla de editar pólizas"
    ></i>
  </span>
</div>

<div class="container mb-8">
  <ul class="nav nav-tabs">
    <li>
      <button
        class="nav-item nav-link btn active"
        [ngStyle]="
          formularioTransaccion
            ? { 'background-color': '#006751', color: 'white' }
            : { 'background-color': 'transparent' }
        "
        (click)="detalleTransaccion()"
      >
        Detalle Transaccion
      </button>
    </li>
    <li>
      <button
        class="nav-item nav-link btn active ml-2"
        [ngStyle]="
          formularioAdquiriente
            ? { 'background-color': '#006751', color: 'white' }
            : { 'background-color': 'transparent' }
        "
        (click)="detalleAdquiriente()"
      >
        Detalle Adquiriente
      </button>
    </li>
    <li>
      <button
        class="nav-item nav-link btn active ml-2"
        [ngStyle]="
          formulariofactura
            ? { 'background-color': '#006751', color: 'white' }
            : { 'background-color': 'transparent' }
        "
        (click)="detalleFactura()"
      >
        Detalle Factura
      </button>
    </li>
    <hr />
    <li>
      <button
        style="margin-right: -9px"
        class="btn btn-outline-danger active float-right"
        ngbTooltip="Cancelar"
        (click)="botonCancelar()"
        triggers="mouseenter:mouseleave"
      >
        <i class="fa fa-times" aria-hidden="true"></i>
      </button>
    </li>
  </ul>
</div>

<br />

  <app-detalle-transaccion *ngIf="formulariouno"
  [dniDocumento]="dni"
  [tipo]="tipo"
  (next)="siguienteAdquiriente()">
  </app-detalle-transaccion>

  <app-detalle-adquiriente *ngIf="formulariodos"
  [dniDocumento]="dni"
  [dniAdquiriente]="adquiriente"
  [tipo]="tipo"
  (next)="siguienteFactura()"
  (back)="atrasTransaccion()"
  >

  </app-detalle-adquiriente>
<form *ngIf="formulariotres">
  <div class="form-row row justify-content-center">
    <div class="form-group col-md-10">
      <div class="form-group row justify-content-center ml-1 mb-2">
        <div class="form-group col-md-6">
          <label for="documento">Documento:</label>
          <input
            type="text"
            id="documento"
            name="documento"
            class="form-control col"
            [(ngModel)]="info.numeroDocumento"
            readonly
          />
        </div>

        <div class="form-group col-md-6">
          <label for="vbaImpuesto">vba. Impuesto:</label>
          <input
            type="text"
            id="vbaImpuesto"
            name="vbaImpuesto"
            class="form-control col"
            [(ngModel)]="info.vbaImpuesto"
            readonly
          />
        </div>

        <div class="form-group col-md-6">
          <label for="baseImponible">Base Imponible</label>
          <input
            type="text"
            id="baseImponible"
            name="baseImponible"
            class="form-control col"
            [(ngModel)]="info.baseImponible"
            readonly
          />
        </div>

        <div class="form-group col-md-6">
          <label for="iva">IVA</label>
          <select
            class="custom-select"
            name="IDCiudad"
            id="IDCiudad"
            [(ngModel)]="info.idPorcentaje"
            (ngModelChange)="calcularIva(info)"
          >
            <option [ngValue]="0">Seleccione</option>
            <option *ngFor="let opcion of porcentajes" [ngValue]="opcion.id">
              {{opcion.llave}} - {{opcion.nombre}}
            </option>
          </select>
        </div>

        <div class="form-group col-md-6">
          <label for="tributo">Tributo</label>
          <input
            type="text"
            id="tributo"
            name="tributo"
            class="form-control col"
            [(ngModel)]="info.valorTributo"
            readonly
          />
        </div>

        <div class="form-group col-md-6">
          <label for="total">Total</label>
          <input
            type="text"
            id="total"
            name="total"
            class="form-control col"
            [(ngModel)]="info.total"
            readonly
          />
        </div>
      </div>

      <accordion [isAnimated]="true">
        <ng-container *ngFor="let data of info.polizas">
          <accordion-group heading="{{ concatenacionPoliza(data) }}">
            <div class="form-group row justify-content-center ml-1 mb-2">
              <div class="form-group col-md-6">
                <label for="primaTotal">Prima Total</label>
                <input
                  type="text"
                  id="{{ data.idPoliza }}"
                  name="{{ data.idPoliza }}"
                  class="form-control col"
                  [(ngModel)]="data.prima"
                  readonly
                />
              </div>
            </div>

            <div class="table-responsive">
              <table
                class="table table-striped table-bordered table-hover"
                style="min-width: 180px"
              >
                <caption>
                  Detalle de polizas
                </caption>
                <thead>
                  <tr>
                    <th scope="col">prima</th>
                    <th scope="col">tributo</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let detalle of data.detalle">
                    <td>
                      <input
                        type="number"
                        class="form-control col"
                        id="{{ detalle.idDetalle }}"
                        name="{{ detalle.idDetalle }}"
                        [(ngModel)]="detalle.prima"
                        (ngModelChange)="calcular(data)"
                        pattern="^[0-9]+"
                      />
                    </td>
                    <td>{{ detalle.valorTributo }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </accordion-group>
        </ng-container>
      </accordion>
    </div>
  </div>

  <div class="d-flex justify-content-rigth">
    <div>
      <button class="btn btn btn-danger ml-2" (click)="detalleAdquiriente()">
        Atras
      </button>
    </div>
    <div>
      <button
        class="btn btn btn-primary ml-2"
        (click)="preguntar()"
        [disabled]="comprueba()"
      >
        <i class="fa fa-plus-circle mr-1"></i>Guardar
      </button>
    </div>
  </div>
</form>
