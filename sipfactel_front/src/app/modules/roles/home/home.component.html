<div class="row">
    <h4 class="mr-3 ml-3" style="margin-top:20px; margin-bottom:15px">Roles</h4>

    <span style="color: #62b7e9;">
    <i class="fa fa-info-circle fa-lg mt-4 mb-3" ngbTooltip=" pantalla de busqueda Roles"></i>
    </span>
</div>


<div class="row mb-2">
    
    <div class="col-6" >
        <button type="button" ngbTooltip="Agregar Roles" *ngIf="esCrear"  (click)="FormularioAgregarRoles()"   class="btn btn-primary rounded-circle"> <i class="fa fa-plus "> </i></button>

    </div>

</div>
<div>
    <div class="row ml-1 ">

        <div class=" ml-0 ">
        </div>



        <div class="ml-4 mt-0  mr-6" *ngIf="filtroBusqueda ">
            <form class="form-inline" [formGroup]="frmBusqueda">
                <div class="form-group">
                    <label for="roleNombre" class="col-form-label ">Nombre Rol:</label>

                    <div class="col-8">
                        <input type="text" maxlength="51" class="form-control" minlength="3" name="roleNombre" id="roleNombre" placeholder="Nombre Rol" formControlName="roleNombre" [(ngModel)]="roleNombre">

                        
                        
                        <div *ngIf="frmBusqueda.get('roleNombre').errors?.minlength" class="invalid-tooltip">
                            Minimo 3 caracteres
                        </div>
                        <div *ngIf="frmBusqueda.get('roleNombre').errors?.maxlength" class="invalid-tooltip">
                            Maximo 50 caracteres
                        </div>
                    </div>

                </div>
              
  
                <button class="btn btn-primary" *ngIf="esConsultar"  (click)="obtenerTablaRoles()"  ngbTooltip="Buscar Rol" data-placement="top" [disabled]="!frmBusqueda.valid" type="button">Buscar   <i class="fa fa-search " aria-hidden="true "></i></button>
            </form>

        </div>

    </div>
</div>

<br>

<div >
    <div class="col-12 ">
        <tabla-filtro-buscar #tfb [paginacionService]="tablaPag.paginacionService " [lista]="permisos " [($listaObservable)]="opcionesFiltro$ "></tabla-filtro-buscar>
    </div>
    <table class="table table-striped table-hover table-bordered ">

        <thead>
            <tr>
                <th scope="col ">Nombre</th>
                <th scope="col ">Descripción</th>
                <th scope="col ">Estado</th>
                <th scope="col ">Módulos</th>
                <th scope="col ">Categoría</th>
                <th scope="col " *ngIf="esEditar">Operación</th>



            </tr>
        </thead>
        <tbody *ngIf="esConsultar">
            <tr *ngFor="let opcion of opcionesFiltro$ | async; index as i ">

                <td>
                    <ngb-highlight [result]="opcion.roleNombre " [term]="tfb.filtroTabla.value "></ngb-highlight>
                </td>
                <td>
                    <ngb-highlight [result]="opcion.roleDescripcion " [term]="tfb.filtroTabla.value "></ngb-highlight>
                </td>
                <td>
                    <ngb-highlight [result]="opcion.roleEsta " [term]="tfb.filtroTabla.value "></ngb-highlight>
                </td>


                <td>
                    {{opcion.modulosStr}}

                </td>
                <td>
                    <ngb-highlight [result]="opcion.categoriaID" [term]="tfb.filtroTabla.value "></ngb-highlight>


                </td>

                <td>
                    <button class="btn btn-primary" *ngIf="esEditar"  ngbTooltip="Editar" (click)="FormularioEditarRoles(opcion.roleRole)" placement="left ">
                    <i class="fa fa-pencil " aria-hidden="true "></i></button>
                </td>
            </tr>
        </tbody>
    </table>
    <tabla-paginacion #tablaPag [lista]="permisos" [($listaObservable)]=" opcionesFiltro$ "></tabla-paginacion>
</div>
<div class="row" *ngIf="formularioAgregar === true">
    <app-agregar-roles (agrego)="FormularioAgregarRoles($event)"></app-agregar-roles>
</div>
<div class="row" *ngIf="formularioEditar === true">
    <app-editar-roles [roleRole]="FormularioEditarRoles()"></app-editar-roles>
</div>